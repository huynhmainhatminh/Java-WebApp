<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>N·∫°p ti·ªÅn - VinFast (UI Only)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
    <style>
        :root {
            --slate-900:#0f172a;--slate-800:#1f2937;--slate-700:#374151;--slate-600:#475569;--slate-500:#64748b;
            --gray-100:#f3f4f6;--gray-200:#e5e7eb;--blue-600:#2563eb;--blue-700:#1d4ed8;--green-500:#22c55e;
            --green-600:#16a34a;--green-700:#059669;--emerald-50:#f0fdf4;--emerald-100:#dcfce7;--yellow-100:#fef3c7;--yellow-500:#f59e0b;--yellow-800:#92400e;
        }
        *{box-sizing:border-box}
        html,body{margin:0;padding:0;font-family:Inter,system-ui,Segoe UI,Roboto,Apple Color Emoji,Segoe UI Emoji,sans-serif;background:#fafafa;color:var(--slate-800)}
        a{color:inherit}
        .container{max-width:960px;margin-inline:auto;padding:24px}
        header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
        .brand{display:flex;gap:.5rem;align-items:center}
        .brand .logo{width:36px;height:36px;border-radius:8px;background:linear-gradient(135deg,#0ea5e9,#3b82f6)}
        .brand h1{font-size:1.25rem;margin:0}
        .pill{font-size:.75rem;background:#eef2ff;padding:.25rem .5rem;border-radius:999px;color:#3730a3}
        .recharge-container{max-width:800px;margin:1rem auto}
        .recharge-header{text-align:center;margin-bottom:1.5rem}
        .recharge-header h2{margin:.25rem 0;color:var(--slate-800)}
        .balance-display{background:linear-gradient(135deg,var(--emerald-50),var(--emerald-100));border:2px solid var(--green-500);border-radius:12px;padding:1.25rem;text-align:center;margin-bottom:1.5rem}
        .balance-label{font-size:.95rem;color:var(--slate-700);margin-bottom:.25rem}
        .balance-amount{font-size:2rem;font-weight:700;color:var(--green-700);font-family:"Courier New",monospace}
        .card{background:#fff;border-radius:16px;padding:1.5rem;box-shadow:0 4px 10px rgba(0,0,0,.06);margin-bottom:1.5rem}
        .form-group{margin-bottom:1rem}
        .form-label{display:block;font-weight:600;color:var(--slate-700);margin-bottom:.5rem}
        .form-input, textarea.form-input{width:100%;padding:.8rem;border:2px solid var(--gray-200);border-radius:10px;font-size:1rem;transition:border-color .2s}
        .form-input:focus, textarea.form-input:focus{outline:none;border-color:var(--blue-600)}
        .amount-buttons{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:.75rem;margin-bottom:.5rem}
        .amount-button{padding:.75rem;border:2px solid var(--gray-200);background:#fff;border-radius:10px;cursor:pointer;transition:.2s;font-weight:600}
        .amount-button:hover,.amount-button.active{border-color:var(--blue-600);background:#eff6ff;color:var(--blue-700)}
        .submit-button{width:100%;background:linear-gradient(135deg,var(--green-700),var(--green-600));color:#fff;border:none;padding:1rem 1.25rem;border-radius:12px;font-size:1.05rem;font-weight:700;cursor:pointer;transition:transform .15s,box-shadow .2s}
        .submit-button:hover{transform:translateY(-1px);box-shadow:0 12px 24px rgba(5,150,105,.25)}
        .payment-info h3{margin:0 0 1rem;color:var(--slate-800);text-align:center}
        .bank-cards{display:grid;gap:1rem}
        .bank-card{border:2px solid var(--gray-200);border-radius:12px;padding:1rem;transition:.2s}
        .bank-card:hover{border-color:var(--blue-600);box-shadow:0 4px 12px rgba(37,99,235,.12)}
        .bank-name{font-size:1.1rem;font-weight:800;color:var(--slate-800);margin-bottom:.5rem}
        .account-item{display:grid;grid-template-columns:1fr auto auto;gap:.5rem;align-items:center;margin:.25rem 0}
        .account-label{font-weight:600;color:var(--slate-600)}
        .account-value{font-weight:700;color:var(--slate-800);font-family:"Courier New",monospace}
        .copy-button{background:var(--blue-600);color:#fff;border:none;padding:.45rem .7rem;border-radius:8px;cursor:pointer;font-size:.875rem}
        .copy-button:hover{background:var(--blue-700)}
        .qr-code{text-align:center;margin-top:.75rem}
        .qr-code img{max-width:150px;border-radius:10px}
        .instructions{background:var(--yellow-100);border:1px solid var(--yellow-500);border-radius:10px;padding:1rem;margin-top:1rem}
        .instructions h4{color:var(--yellow-800);margin:.25rem 0 .5rem}
        .instructions ol{color:var(--yellow-800);margin:0;padding-left:1.25rem}
        .recharge-result{display:none}
        .recharge-result.show{display:block}
        .result-header{text-align:center;margin-bottom:1.25rem}
        .result-header h3{color:var(--green-700);margin:.25rem 0}
        .result-info{background:var(--emerald-50);border:2px solid var(--green-500);border-radius:12px;padding:1rem;margin-bottom:1rem}
        .result-item{display:flex;justify-content:space-between;gap:1rem;padding:.45rem 0;border-bottom:1px solid var(--emerald-100)}
        .result-item:last-child{border-bottom:none}
        .result-label{font-weight:600;color:var(--slate-700)}
        .result-value{font-weight:800;color:var(--green-700);font-family:"Courier New",monospace}
        .bank-selection{margin:1.25rem 0}
        .bank-selection h4{text-align:center;margin:.25rem 0 1rem}
        .bank-options{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:.75rem}
        .bank-option{border:2px solid var(--gray-200);border-radius:12px;padding:1rem;cursor:pointer;transition:.2s;text-align:center}
        .bank-option:hover,.bank-option.selected{border-color:var(--blue-600);background:#eff6ff}
        .bank-option.selected{background:#dbeafe}
        .qr-section{text-align:center;margin:1rem 0}
        .qr-code-container{display:inline-block;padding:1rem;background:#fff;border:2px solid var(--gray-200);border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.08)}
        .qr-code-container img{max-width:220px;height:auto}
        @media (max-width:768px){
            .amount-buttons{grid-template-columns:repeat(2,1fr)}
            .account-item{grid-template-columns:1fr auto}
        }
    </style>
</head>
<body>
<!-- Header (t√πy ch·ªçn) -->
<header class="container">
    <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <h1>N·∫°p ti·ªÅn</h1>
    </div>
    <span class="pill">UI Only</span>
</header>

<main>
    <div class="container recharge-container">
        <div class="recharge-header">
            <h2>üí∞ N·∫°p ti·ªÅn v√†o t√†i kho·∫£n</h2>
            <p>N·∫°p ti·ªÅn ƒë·ªÉ s·ª≠ d·ª•ng d·ªãch v·ª• thu√™ pin VinFast</p>
        </div>

        <div class="balance-display" aria-live="polite">
            <div class="balance-label">S·ªë d∆∞ hi·ªán t·∫°i</div>
            <div class="balance-amount" id="balanceAmount">0 VNƒê</div>
        </div>

        <section class="card">
            <h3 style="margin:0 0 1rem">Th√¥ng tin n·∫°p ti·ªÅn</h3>
            <form id="rechargeForm" novalidate>
                <div class="form-group">
                    <label class="form-label" for="amountInput">S·ªë ti·ªÅn n·∫°p (VNƒê) *</label>
                    <div class="amount-buttons" id="amountButtons">
                        <button type="button" class="amount-button" data-amount="50000">50,000</button>
                        <button type="button" class="amount-button" data-amount="100000">100,000</button>
                        <button type="button" class="amount-button" data-amount="200000">200,000</button>
                        <button type="button" class="amount-button" data-amount="500000">500,000</button>
                        <button type="button" class="amount-button" data-amount="1000000">1,000,000</button>
                        <button type="button" class="amount-button" data-amount="2000000">2,000,000</button>
                    </div>
                    <input type="number" name="amount" id="amountInput" class="form-input" placeholder="Nh·∫≠p s·ªë ti·ªÅn..." required min="10000" max="10000000" />
                </div>

                <div class="form-group">
                    <label class="form-label" for="contentInput">N·ªôi dung chuy·ªÉn kho·∫£n *</label>
                    <input type="text" name="content" id="contentInput" class="form-input" placeholder="NAP_TIEN_[USERNAME]_[S·ªê_TI·ªÄN]" readonly />
                </div>

                <div class="form-group">
                    <label class="form-label" for="notesInput">Ghi ch√∫ (kh√¥ng b·∫Øt bu·ªôc)</label>
                    <textarea id="notesInput" name="notes" class="form-input" rows="3" placeholder="Ghi ch√∫ th√™m..."></textarea>
                </div>

                <button type="submit" class="submit-button">T·∫°o y√™u c·∫ßu n·∫°p ti·ªÅn</button>
            </form>
        </section>

        <section class="card payment-info">
            <h3>üè¶ Th√¥ng tin chuy·ªÉn kho·∫£n</h3>
            <div class="bank-cards" id="bankCards">
                <!-- render ƒë·ªông -->
            </div>

            <div class="instructions" role="note" aria-label="H∆∞·ªõng d·∫´n n·∫°p ti·ªÅn">
                <h4>üìã H∆∞·ªõng d·∫´n n·∫°p ti·ªÅn:</h4>
                <ol>
                    <li>Ch·ªçn s·ªë ti·ªÅn mu·ªën n·∫°p ho·∫∑c nh·∫≠p s·ªë ti·ªÅn t√πy ch·ªânh</li>
                    <li>Copy s·ªë t√†i kho·∫£n v√† ch·ªß t√†i kho·∫£n</li>
                    <li>Chuy·ªÉn kho·∫£n v·ªõi n·ªôi dung ƒë√£ ƒë∆∞·ª£c t·∫°o s·∫µn</li>
                    <li>Ch·ª•p ·∫£nh bi√™n lai chuy·ªÉn kho·∫£n</li>
                    <li>Li√™n h·ªá admin ƒë·ªÉ x√°c nh·∫≠n n·∫°p ti·ªÅn</li>
                </ol>
            </div>
        </section>

        <!-- K·∫øt qu·∫£ n·∫°p ti·ªÅn -->
        <section class="card recharge-result" id="rechargeResult" aria-live="polite">
            <div class="result-header">
                <h3>‚úÖ Y√™u c·∫ßu n·∫°p ti·ªÅn ƒë√£ ƒë∆∞·ª£c t·∫°o!</h3>
                <p>Vui l√≤ng chuy·ªÉn kho·∫£n theo th√¥ng tin b√™n d∆∞·ªõi</p>
            </div>

            <div class="result-info" id="resultInfo"></div>

            <div class="bank-selection">
                <h4>üè¶ Ch·ªçn ng√¢n h√†ng ƒë·ªÉ chuy·ªÉn kho·∫£n</h4>
                <div class="bank-options" id="bankOptions"></div>
            </div>

            <div class="qr-section">
                <h4>üì± Qu√©t QR Code ƒë·ªÉ chuy·ªÉn kho·∫£n</h4>
                <div class="qr-code-container">
                    <img id="qrCodeImage" src="" alt="QR Code chuy·ªÉn kho·∫£n" />
                </div>
            </div>

            <div class="instructions" role="note">
                <h4>üìã H∆∞·ªõng d·∫´n n·∫°p ti·ªÅn:</h4>
                <ol>
                    <li>Ch·ªçn ng√¢n h√†ng ph√π h·ª£p t·ª´ danh s√°ch tr√™n</li>
                    <li>Qu√©t QR code ho·∫∑c chuy·ªÉn kho·∫£n th·ªß c√¥ng</li>
                    <li>ƒê·∫£m b·∫£o n·ªôi dung chuy·ªÉn kho·∫£n ch√≠nh x√°c</li>
                    <li>Ch·ª•p ·∫£nh bi√™n lai chuy·ªÉn kho·∫£n</li>
                    <li>Li√™n h·ªá admin ƒë·ªÉ x√°c nh·∫≠n n·∫°p ti·ªÅn</li>
                </ol>
            </div>
        </section>
    </div>
</main>

<!-- Footer (t√πy ch·ªçn) -->
<footer class="container" style="opacity:.7;font-size:.9rem;margin-bottom:24px">
    ¬© 2025 VinFast ‚Äî Demo giao di·ªán n·∫°p ti·ªÅn
</footer>

<script>
    // ====== D·ªÆ LI·ªÜU GI·∫¢ L·∫¨P (thay b·∫±ng API th·∫≠t n·∫øu c·∫ßn) ======
    const username = "USER_DEMO";
    const currentBalance = 350000; // v√≠ d·ª•: 350,000 VNƒê

    const paymentInfos = [
        {
            id: 1,
            bank_name: "Vietcombank",
            account_number: "0123456789",
            account_holder: "NGUYEN VAN A",
            qr_code_url: "" // c√≥ th·ªÉ ƒë·ªÉ r·ªóng: s·∫Ω d√πng VietQR ƒë·ªông theo l·ª±a ch·ªçn
        },
        {
            id: 2,
            bank_name: "Techcombank",
            account_number: "1900123456789",
            account_holder: "NGUYEN VAN A",
            qr_code_url: ""
        },
        {
            id: 3,
            bank_name: "MBBank",
            account_number: "123456789",
            account_holder: "NGUYEN VAN A",
            qr_code_url: ""
        }
    ];

    // ====== DOM ELEMENTS ======
    const amountButtons = document.querySelectorAll(".amount-button");
    const amountInput = document.getElementById("amountInput");
    const contentInput = document.getElementById("contentInput");
    const rechargeForm = document.getElementById("rechargeForm");
    const balanceAmount = document.getElementById("balanceAmount");
    const bankCards = document.getElementById("bankCards");

    // Render s·ªë d∆∞
    balanceAmount.textContent = `${Number(currentBalance).toLocaleString("vi-VN")} VNƒê`;

    // Render danh s√°ch ng√¢n h√†ng (kh·ªëi ‚ÄúTh√¥ng tin chuy·ªÉn kho·∫£n‚Äù)
    function renderBankCards() {
        bankCards.innerHTML = "";
        paymentInfos.forEach((bank) => {
            const card = document.createElement("div");
            card.className = "bank-card";

            const name = document.createElement("div");
            name.className = "bank-name";
            name.textContent = bank.bank_name;

            const accountWrap1 = document.createElement("div");
            accountWrap1.className = "account-item";
            const label1 = document.createElement("span");
            label1.className = "account-label";
            label1.textContent = "S·ªë t√†i kho·∫£n:";
            const value1 = document.createElement("span");
            value1.className = "account-value";
            value1.id = `account-${bank.id}`;
            value1.textContent = bank.account_number;

            const copyBtn = document.createElement("button");
            copyBtn.className = "copy-button";
            copyBtn.type = "button";
            copyBtn.textContent = "Copy";
            copyBtn.addEventListener("click", () => copyToClipboard(value1));

            accountWrap1.appendChild(label1);
            accountWrap1.appendChild(value1);
            accountWrap1.appendChild(copyBtn);

            const accountWrap2 = document.createElement("div");
            accountWrap2.className = "account-item";
            const label2 = document.createElement("span");
            label2.className = "account-label";
            label2.textContent = "Ch·ªß t√†i kho·∫£n:";
            const value2 = document.createElement("span");
            value2.className = "account-value";
            value2.textContent = bank.account_holder;

            accountWrap2.appendChild(label2);
            accountWrap2.appendChild(value2);

            card.appendChild(name);
            card.appendChild(accountWrap1);
            card.appendChild(accountWrap2);

            if (bank.qr_code_url) {
                const qr = document.createElement("div");
                qr.className = "qr-code";
                const img = document.createElement("img");
                img.alt = `QR Code ${bank.bank_name}`;
                img.src = bank.qr_code_url;
                qr.appendChild(img);
                card.appendChild(qr);
            }

            bankCards.appendChild(card);
        });
    }
    renderBankCards();

    // ====== HANDLERS ======
    // click preset amount
    amountButtons.forEach((button) => {
        button.addEventListener("click", function () {
            amountButtons.forEach((b) => b.classList.remove("active"));
            this.classList.add("active");
            amountInput.value = this.dataset.amount;
            updateContent();
        });
    });

    // nh·∫≠p s·ªë ti·ªÅn
    amountInput.addEventListener("input", function () {
        amountButtons.forEach((b) => b.classList.remove("active"));
        updateContent();
    });

    // c·∫≠p nh·∫≠t n·ªôi dung chuy·ªÉn kho·∫£n
    function updateContent() {
        const amount = amountInput.value;
        if (amount && !isNaN(amount)) {
            const formattedAmount = parseInt(amount, 10).toLocaleString("vi-VN");
            contentInput.value = `NAP_TIEN_${username}_${formattedAmount}`;
        } else {
            contentInput.value = "";
        }
    }

    // copy helper
    function copyToClipboard(targetEl) {
        const text = targetEl.textContent?.trim() ?? "";
        navigator.clipboard
            .writeText(text)
            .then(() => {
                const btn = targetEl.parentElement?.querySelector(".copy-button");
                if (!btn) return;
                const original = btn.textContent;
                btn.textContent = "ƒê√£ copy!";
                btn.style.background = "#059669";
                setTimeout(() => {
                    btn.textContent = original;
                    btn.style.background = "";
                }, 1800);
            })
            .catch(() => alert("Kh√¥ng th·ªÉ copy. Vui l√≤ng copy th·ªß c√¥ng."));
    }

    // submit form
    rechargeForm.addEventListener("submit", function (e) {
        e.preventDefault();
        const amount = Number(amountInput.value);
        const content = contentInput.value.trim();

        if (!amount || amount < 10000) {
            alert("S·ªë ti·ªÅn n·∫°p t·ªëi thi·ªÉu l√† 10,000 VNƒê");
            return;
        }
        if (amount > 10000000) {
            alert("S·ªë ti·ªÅn n·∫°p t·ªëi ƒëa l√† 10,000,000 VNƒê");
            return;
        }
        if (!content) {
            alert("N·ªôi dung chuy·ªÉn kho·∫£n ch∆∞a h·ª£p l·ªá");
            return;
        }

        showRechargeResult(amount, content);
    });

    // ====== K·∫æT QU·∫¢ N·∫†P TI·ªÄN ======
    function showRechargeResult(amount, content) {
        const rechargeResult = document.getElementById("rechargeResult");
        const resultInfo = document.getElementById("resultInfo");
        const bankOptions = document.getElementById("bankOptions");

        resultInfo.innerHTML = `
        <div class="result-item">
          <span class="result-label">S·ªë ti·ªÅn n·∫°p:</span>
          <span class="result-value">${parseInt(amount,10).toLocaleString("vi-VN")} VNƒê</span>
        </div>
        <div class="result-item">
          <span class="result-label">N·ªôi dung chuy·ªÉn kho·∫£n:</span>
          <span class="result-value">${escapeHTML(content)}</span>
        </div>
        <div class="result-item">
          <span class="result-label">Th·ªùi gian t·∫°o:</span>
          <span class="result-value">${new Date().toLocaleString("vi-VN")}</span>
        </div>
      `;

        // render bank options
        bankOptions.innerHTML = "";
        paymentInfos.forEach((bank, idx) => {
            const option = document.createElement("div");
            option.className = "bank-option";
            option.dataset.bankId = bank.id;
            option.dataset.bankCode = getBankCode(bank.bank_name);
            option.dataset.accountNumber = bank.account_number;

            option.innerHTML = `
          <div class="bank-name">${escapeHTML(bank.bank_name)}</div>
          <div class="bank-account">${escapeHTML(bank.account_number)}</div>
        `;

            option.addEventListener("click", function () {
                document.querySelectorAll(".bank-option").forEach((el) => el.classList.remove("selected"));
                this.classList.add("selected");
                generateQRCode(this.dataset.bankCode, this.dataset.accountNumber, amount, content);
            });

            bankOptions.appendChild(option);
            if (idx === 0) {
                option.classList.add("selected");
                generateQRCode(option.dataset.bankCode, option.dataset.accountNumber, amount, content);
            }
        });

        rechargeResult.classList.add("show");
        rechargeResult.scrollIntoView({ behavior: "smooth", block: "start" });
    }

    // map m√£ ng√¢n h√†ng
    function getBankCode(bankName) {
        const bankCodes = {
            Vietcombank: "VCB",
            Techcombank: "TCB",
            BIDV: "BIDV",
            Agribank: "VBA",
            Vietinbank: "CTG",
            ACB: "ACB",
            Sacombank: "STB",
            MBBank: "MBB",
            TPBank: "TPB",
            VPBank: "VPB",
            HDBank: "HDB",
            SHB: "SHB",
            Eximbank: "EIB",
            MSB: "MSB",
            OCB: "OCB",
            SCB: "SCB",
            VIB: "VIB",
            SeABank: "SSB",
            NCB: "NCB",
            PGBank: "PGB"
        };
        return bankCodes[bankName] || "VCB";
    }

    // t·∫°o QR qua VietQR
    function generateQRCode(bankCode, accountNumber, amount, content) {
        const img = document.getElementById("qrCodeImage");
        const qrUrl = `https://img.vietqr.io/image/${bankCode}-${accountNumber}-compact1.jpg?addInfo=${encodeURIComponent(
            content
        )}&amount=${encodeURIComponent(amount)}`;

        // loading state (t·ªëi gi·∫£n)
        img.alt = `ƒêang t·∫£i QR cho ${bankCode} - ${accountNumber}...`;
        img.src = qrUrl;

        img.onload = function () {
            img.alt = `QR Code chuy·ªÉn kho·∫£n ${bankCode} - ${accountNumber}`;
        };
        img.onerror = function () {
            img.src = "https://via.placeholder.com/220x220/ef4444/ffffff?text=QR+Error";
            img.alt = "Kh√¥ng t·∫£i ƒë∆∞·ª£c QR Code";
        };
    }

    // escape helper
    function escapeHTML(str) {
        return String(str)
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;")
            .replace(/"/g, "&quot;")
            .replace(/'/g, "&#039;");
    }

    // Kh·ªüi t·∫°o n·ªôi dung chuy·ªÉn kho·∫£n m·∫´u (n·∫øu ƒë√£ c√≥ s·ªë ti·ªÅn)
    updateContent();
</script>
</body>
</html>
